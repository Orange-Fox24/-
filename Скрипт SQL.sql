-- Таблица категорий
CREATE TABLE Categories (
    category_id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT
);

-- Вставка данных категорий
INSERT INTO Categories (name, description) VALUES
('Письменные принадлежности', 'Ручки, карандаши, маркеры, фломастеры, ручки-роллеры, гелевые ручки, стирательные резинки и другие инструменты для письма и рисования.'),
('Бумага и блокноты', 'Различные виды бумаги (офисная, цветная, для заметок), тетради, блокноты, ежедневники, альбомы для рисования и специальные бумаги (например, для печати на принтере).'),
('Организация рабочего пространства', 'Папки, файлы, органайзеры, подставки для документов, настольные принадлежности, держатели для ручек и другие аксессуары для упорядочивания рабочего места.'),
('Канцелярские инструменты', 'Ножницы, степлеры, скобы, клеевые карандаши, ленты, линейки, угольники, циркули и другие инструменты, необходимые для выполнения различных задач.'),
('Художественные принадлежности', 'Краски, кисти, наборы для рисования, материалы для скрапбукинга, наклейки и другие товары для хобби и творчества.');

-- Таблица пользователей
CREATE TABLE Users (
    user_id SERIAL PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    phone VARCHAR(20),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    bonus_points INT DEFAULT 0
);

-- Вставка данных пользователей
INSERT INTO Users (username, password, email, first_name, last_name, phone, created_at, bonus_points) VALUES
('alexey.smirnov1', 'G7k!qZ3x@9Lp', 'alexey.smirnov1985@gmail.com', 'Алексей', 'Смирнов', '8 (912) 345-67-89', '2020-01-15', 482913),
('maria.ivanova10', 'R4t#vB8m$2Jw', 'maria.ivanova1990@yahoo.com', 'Мария', 'Иванова', '8 (913) 456-78-90', '2019-02-22', 759024),
('dmitry.kuznetsov', 'H6y&fD1n^5Qe', 'dmitry.kuznetsov1978@outlook.com', 'Дмитрий', 'Кузнецов', '8 (914) 567-89-01', '2021-03-10', 136487),
('anna.petrova12', 'T9u*eW4j!7Xs', 'anna.petrova1982@mail.ru', 'Анна', 'Петрова', '8 (915) 678-90-12', '2018-04-05', NULL),
('sergey.v', 'P3o@hK2z#8Vb', 'sergey.vasiliev1975@gmail.com', 'Сергей', 'Васильев', '8 (916) 789-01-23', '2022-05-30', 204758),
('ekaterina.sokolova1993', 'L5m^jR6t&1Qw', 'ekaterina.sokolova1993@yahoo.com', 'Екатерина', 'Соколова', '8 (917) 890-12-34', '2020-06-18', NULL),
('andrey.mikhailov1988', 'S8n!kF3v$4Zy', 'andrey.mikhailov1988@outlook.com', 'Андрей', 'Михайлов', '8 (918) 901-23-45', '2017-07-25', 918362),
('olga.fedorova1980', 'J2p#xC9q@7Lh', 'olga.fedorova1980@mail.ru', 'Ольга', 'Федорова', '8 (919) 012-34-56', '2021-08-12', 573901),
('nikolai.popov1972', 'D1s&vT5m^8Wj', 'nikolai.popov1972@gmail.com', 'Николай', 'Попов', '8 (920) 123-45-67', '2019-09-09', 640275),
('tatiana.lebedeva1985', 'Q4r!yH2k$6Zp', 'tatiana.lebedeva1985@yahoo.com', 'Татьяна', 'Лебедева', '8 (921) 234-56-78', '2023-10-14', 385914),
('vladimir.orlov1991', 'F7t@jN1w#3Xq', 'vladimir.orlov1991@outlook.com', 'Владимир', 'Орлов', '8 (922) 345-67-89', '2022-11-27', NULL),
('svetlana.romanova1986', 'K9l^mB4z&2Vf', 'svetlana.romanova1986@mail.ru', 'Светлана', 'Романова', '8 (923) 456-78-90', '2020-12-03', 726048),
('igor.nikolaev1979', 'E3q!hR8t$5Jk', 'igor.nikolaev1979@gmail.com', 'Игорь', 'Николаев', '8 (924) 567-89-01', '2021-01-21', 194753),
('yulia.zakharova1992', 'U6n#pD2v@1Wz', 'yulia.zakharova1992@yahoo.com', 'Юлия', 'Захарова', '8 (925) 678-90-12', '2018-02-07', NULL),
('artem.grigoryev198', 'A8j&kF5m^7Qx', 'artem.grigoryev1984@outlook.com', 'Артем', 'Григорьев', '8 (926) 789-01-23', '2022-03-16', NULL),
('natalya.kovalen', 'Z1t!vH3n$9Lp', 'natalya.kovalenko1983@mail.ru', 'Наталья', 'Коваленко', '8 (927) 890-12-34', '2019-04-29', NULL),
('denis.sid', 'Y4r@jK2w#6Xs', 'denis.sidorov1995@gmail.com', 'Денис', 'Сидоров', '8 (928) 901-23-45', '2020-05-11', 802316),
('elena.morozova', 'C5m^nT8q&1Jw', 'elena.morozova1987@yahoo.com', 'Елена', 'Морозова', '8 (929) 012-34-56', '2021-06-24', 457890),
('pavel.tikhonov1994', 'B2p!xF7k$4Zy', 'pavel.tikhonov1994@outlook.com', 'Павел', 'Тихонов', '8 (930) 123-45-67', '2017-07-08', 639218),
('viktoria.kuzmina1', 'X9j#hR1t@3Qe', 'viktoria.kuzmina1996@mail.ru', 'Виктория', 'Кузьмина', '8 (931) 234-56-78', '2023-08-19', 275104),
('roman.chernov67', 'M6n&vD4m^2Wj', 'roman.chernov1981@gmail.com', 'Роман', 'Чернов', '8 (932) 345-67-89', '2022-09-02', 890642),
('daria.solov', 'V8t!kF3q$5Lp', 'daria.solovyeva1998@yahoo.com', 'Дарья', 'Соловьева', '8 (933) 456-78-90', '2019-10-15', NULL),
('konstantin89', 'N1r@jH2w#7Xs', 'konstantin.belov1989@outlook.com', 'Константин', 'Белов', '8 (934) 567-89-01', '2021-11-28', NULL),
('anastasia.klimova1990', 'O4m^nB5z&1Qw', 'anastasia.klimova1990@mail.ru', 'Анастасия', 'Климова', '8 (935) 678-90-12', '2018-12-04', NULL),
('maxim.yakovlev', 'I3q!hR9t$6Jk', 'maxim.yakovlev1983@gmail.com', 'Максим', 'Яковлев', '8 (936) 789-01-23', '2023-01-13', NULL);

-- Таблица товаров
CREATE TABLE Products (
    product_id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    stock_quantity INT NOT NULL,
    category_id INT REFERENCES Categories(category_id) ON DELETE SET NULL,
    image_url VARCHAR(255),  -- Поле для хранения URL изображений
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Вставка данных товаров
INSERT INTO Products (name, description, price, stock_quantity, category_id, image_url, created_at) VALUES
('Ручка Parker Jotter', 'Классическая ручка с металлическим корпусом и удобным захватом. Идеальна для повседневного использования.', 450.00, 678, 1, NULL, '2023-05-12 00:00:00');
(2, 'Карандаш Faber-Castell 9000', 'Высококачественный графитовый карандаш для рисования и черчения.', 120.00, 1284, 1, NULL, '2024-04-09 00:00:00'),
(3, 'Маркер Sharpie Permanent', 'Водостойкий маркер с яркими цветами, подходит для различных поверхностей.', 150.00, 4689, 1, NULL, '2024-01-10 00:00:00'),
(4, 'Фломастер Stabilo Point 88', 'Набор фломастеров с тонким наконечником, идеален для рисования и письма.', 300.00, 356, 1, NULL, '2023-03-21 00:00:00'),
(5, 'Ручка-роллер Uni-ball Vision Elite', 'Ручка с уникальной системой подачи чернил, не протекает при изменении давления.', 250.00, 98, 1, NULL,'2024-12-30 00:00:00'),
(6, 'Гелевая ручка Pilot G2', 'Гелевая ручка с мягким захватом и яркими чернилами, идеально подходит для длительного письма.', 200.00, 6963, 1, NULL, '2024-06-08 00:00:00'),
(7, 'Стирательная резинка Staedtler Mars', 'Качественная стирательная резинка, не оставляет следов на бумаге.', 50.00, 4567, 1, NULL, '2023-12-02 00:00:00'),
(8, 'Механический карандаш Pentel GraphGear 1000', 'Профессиональный механический карандаш с регулируемым зажимом и мягким захватом.', 600.00, 357, 1, NULL, '2024-01-07 00:00:00'),
(9, 'Набор чертежных инструментов Rotring', 'Комплект для черчения, включает линейку, угольник и циркуль.', 800.00, 124, 1, NULL, '2024-10-22 00:00:00'),
(10, 'Корректор Tipp-Ex Mini', 'Удобный корректор в мини-формате, идеально подходит для исправления ошибок.', 100.00, 648, 1, NULL, '2024-02-04 00:00:00'),
(11, 'Линейка Maped 30 см', 'Прозрачная линейка с делениями, удобна для черчения и измерений.', 70.00, 547, 1, NULL, '2024-04-24 00:00:00'),
(12, 'Набор цветных карандашей Crayola', 'Яркие цветные карандаши, идеально подходят для рисования и раскрашивания.', 400.00, 6543, 1, NULL, '2023-07-18 00:00:00'),
(13, 'Перьевая ручка Lamy Safari', 'Элегантная перьевая ручка с пластиковым корпусом и сменными чернилами.', 1200.00, 359, 1, NULL, '2023-12-19 00:00:00'),
(14, 'Набор фломастеров Crayola Super Tips', 'Многофункциональные фломастеры с тонким и толстым наконечником.', 350.00, 554, 1, NULL, '2023-12-12 00:00:00'),
(15, 'Ручка с заменяемыми картриджами Schneider Slider', 'Удобная ручка с возможностью замены картриджей, подходит для длительного использования.', 250.00, 82, 1, NULL, '2023-11-10 00:00:00'),
(16, 'Офисная бумага A4 Xerox', 'Высококачественная офисная бумага для печати и копирования.', 300.00, 245, 2, NULL, '2023-03-01 00:00:00'),
(17, 'Цветная бумага для творчества Canson', 'Набор цветной бумаги для различных творческих проектов.', 250.00, 875, 2, NULL, '2023-10-10 00:00:00'),
(18, 'Тетрадь с линейкой Oxford', 'Тетрадь с качественной бумагой и прочной обложкой.', 150.00, 587, 2, NULL, '2024-05-15 00:00:00'),
(19, 'Блокнот Moleskine Classic', 'Элегантный блокнот с мягкой обложкой и качественной бумагой.', 800.00, 48, 2, NULL, '2024-09-09 00:00:00'),
(20, 'Ежедневник Leuchtturm1917', 'Стильный ежедневник с множеством функций, включая нумерацию страниц.', 1200.00, 789, 2, NULL, '2023-12-12 00:00:00'),
(21, 'Альбом для рисования Canson Montval', 'Альбом с качественной бумагой для акварели и других художественных техник. Идеален для рисования и живописи.', 600.00, 57, 2, NULL, '2023-11-10 00:00:00'),
(22, 'Специальная бумага для печати HP', 'Бумага для струйной и лазерной печати, обеспечивает яркие и четкие изображения.', 350.00, 125, 2, NULL, '2023-03-01 00:00:00'),
(23, 'Бумага для заметок Post-it', 'Самоклеящиеся листы для заметок, удобны для организации мыслей и напоминаний.', 200.00, 875, 2, NULL, '2023-10-10 00:00:00'),
(24, 'Блокнот с точечной сеткой Rhodia', 'Блокнот с точечной сеткой, идеален для заметок и рисования. Бумага высокого качества.', 500.00, 254, 2, NULL, '2024-05-15 00:00:00'),
(25, 'Альбом для скрапбукинга American Crafts', 'Альбом с красивыми страницами для создания уникальных скрап-работ.', 1000.00, 128, 2, NULL, '2023-05-12 00:00:00'),
(26, 'Набор самоклеящейся бумаги Avery', 'Набор самоклеящейся бумаги для создания этикеток и наклеек.', 300.00, 457, 2, NULL, '2024-04-09 00:00:00'),
(27, 'Бумага для оригами Origami Shop', 'Специальная бумага для оригами, доступна в различных цветах и узорах.', 250.00, 769, 2, NULL, '2024-01-10 00:00:00'),
(28, 'Блокнот с магнитным замком Pigna', 'Удобный блокнот с магнитным замком, идеально подходит для записей.', 400.00, 547, 2, NULL, '2023-03-21 00:00:00'),
(29, 'Набор цветных листов для заметок 3M', 'Яркие цветные листы для заметок, удобны для организации информации.', 150.00, 581, 2, NULL, '2024-12-30 00:00:00'),
(30, 'Картон для творчества Clairefontaine', 'Высококачественный картон для различных творческих проектов.', 300.00, 562, 2, NULL, '2024-06-08 00:00:00'),
(31, 'Папка для документов Leitz', 'Прочная папка для документов с кнопкой, идеально подходит для хранения бумаг.', 200.00, 159, 3, NULL, '2023-12-02 00:00:00'),
(32, 'Настольный органайзер Fellowes', 'Удобный органайзер для канцелярии, помогает поддерживать порядок на столе.', 600.00, 657, 3, NULL, '2024-01-07 00:00:00'),
(33, 'Держатель для визиток Muji', 'Элегантный держатель для визиток, выполненный из качественных материалов.', 350.00, 521, 3, NULL, '2024-10-22 00:00:00'),
(34, 'Подставка для книг Bookstand', 'Удобная подставка для книг, помогает освободить руки во время чтения.', 500.00, 84, 3, NULL, '2024-02-04 00:00:00'),
(35, 'Файлы для документов Esselte', 'Прозрачные файлы для документов, защищают бумаги от повреждений.', 150.00, 587, 3, NULL, '2024-04-24 00:00:00'),
(36, 'Коробка для хранения IKEA', 'Просторная коробка для хранения канцелярии и других мелочей.', 400.00, 55, 3, NULL, '2023-07-18 00:00:00'),
(37, 'Доска для заметок Quartet', 'Магнитная доска для заметок, идеально подходит для офиса или дома.', 1200.00, 95, 3, NULL, '2023-12-19 00:00:00'),
(38, 'Настенный органайзер Officemate', 'Удобный органайзер для стен, помогает организовать пространство.', 800.00, 15, 3, NULL, '2023-12-12 00:00:00'),
(39, 'Держатель для ручек Staples', 'Компактный держатель для ручек и карандашей, помогает поддерживать порядок.', 150.00, 587, 3, NULL, '2023-11-10 00:00:00'),
(40, 'Подставка для документов Elba', 'Подставка для документов с разделителями, удобно для организации бумаг.', 300.00, 589, 3, NULL, '2023-03-01 00:00:00'),
(41, 'Набор магнитных закладок Bookmarks', 'Яркие магнитные закладки для книг, удобно использовать для заметок.', 200.00, 662, 3, NULL, '2023-10-10 00:00:00'),
(42, 'Коврик для мыши Logitech', 'Удобный коврик для мыши с антискользящей основой, подходит для работы и игр.', 400.00, 55, 3, NULL, '2024-05-15 00:00:00'),
(43, 'Лоток для бумаг Fellowes', 'Многоуровневый лоток для бумаг, помогает организовать документы на столе', 600.00, 587, 3, NULL, '2024-09-09 00:00:00'),
(44, 'Органайзер для столовых принадлежностей Desk Organizer', 'Компактный органайзер для хранения канцелярских принадлежностей и мелочей.', 350.00, 452, 3, NULL, '2023-12-12 00:00:00'),
(45, 'Настольная подставка для планшетов MoKo', 'Удобная подставка для планшетов, позволяет использовать устройство в удобном положении.', 500.00, 496, 3, NULL, '2023-11-10 00:00:00'),
(46, 'Ножницы Fiskars', 'Качественные ножницы с острыми лезвиями, идеально подходят для бумаги и других материалов.', 300.00, 52, 4, NULL, '2023-03-01 00:00:00'),
(47, 'Степлер Rapid', 'Надежный степлер с высокой мощностью, подходит для скрепления большого количества листов.', 600.00, 87, 4, NULL, '2023-10-10 00:00:00'),
(48, 'Клеевой карандаш UHU', 'Удобный клеевой карандаш, идеально подходит для бумаги и картона.', 150.00, 589, 4, NULL, '2024-05-15 00:00:00'),
(49, 'Лента для упаковки Scotch', 'Прозрачная упаковочная лента, идеально подходит для упаковки подарков и документов.', 100.00, 662, 4, NULL, '2023-05-12 00:00:00'),
(50, 'Линейка с уровнем Stanley', 'Прочная линейка с встроенным уровнем, удобна для черчения и измерений.', 250.00, 54, 4, NULL, '2024-04-09 00:00:00'),
(51, 'Угольник Maped', 'Прозрачный угольник с делениями, идеально подходит для черчения и рисования.', 100.00, 256, 4, NULL, '2024-01-10 00:00:00'),
(52, 'Циркуль Faber-Castell', 'Профессиональный циркуль с дополнительными насадками для рисования кругов.', 400.00, 365, 4, NULL, '2024-06-20 00:00:00'),
(53, 'Набор скоб для степлера Bostitch', 'Набор скоб для степлера, подходит для различных моделей.', 150.00, 82, 4, NULL, '2023-11-17 00:00:00'),
(54, 'Клей-карандаш Pritt', 'Клей-карандаш с удобным аппликатором, идеально подходит для бумаги.', 120.00, 69, 4, NULL, '2024-06-28 00:00:00'),
(55, 'Ножницы для бумаги Westcott', 'Легкие и удобные ножницы для бумаги, подходят для детей и взрослых.', 250.00, 365, 4, NULL, '2024-09-10 00:00:00'),
(56, 'Линейка с подсветкой Lighted Ruler', 'Линейка с встроенной подсветкой, удобна для работы в условиях низкой освещенности.', 500.00, 475, 4, NULL, '2023-05-12 00:00:00'),
(57, 'Набор маркеров Sharpie', 'Яркие маркеры для рисования и письма, подходят для различных поверхностей.', 400.00, 25, 4, NULL, '2024-04-09 00:00:00'),
(58, 'Клей для декупажа Mod Podge', 'Универсальный клей для декупажа, подходит для различных материалов.', 300.00, 259, 4, NULL, '2024-01-10 00:00:00'),
(59, 'Набор канцелярских резинок Rubber Bands', 'Набор резинок для бумаги, удобно для организации документов.', 100.00, 278, 4, NULL, '2024-06-20 00:00:00'),
(60, 'Нож для бумаги Olfa', 'Острый нож для бумаги с заменяемыми лезвиями, идеально подходит для точных резов.', 350.00, 286, 4, NULL, '2024-01-07 00:00:00'),
(61, 'Акварельные краски Winsor & Newton', 'Профессиональные акварельные краски с яркими цветами и высокой прозрачностью.', 1200.00, 854, 5, NULL, '2024-10-22 00:00:00'),
(62, 'Набор кистей Da Vinci', 'Профессиональный набор кистей из натурального ворса, идеально подходит для акварели и масла.', 1000.00, 547, 5, NULL, '2024-02-04 00:00:00'),
(63, 'Масляные краски Van Gogh', 'Высококачественные масляные краски с насыщенными цветами, подходят для профессиональных художников.', 1500.00, 628, 5, NULL, '2024-04-24 00:00:00'),
(64, 'Набор пастелей Faber-Castell', 'Мягкие пастели с яркими цветами, идеально подходят для рисования и смешивания.', 800.00, 647, 5, NULL, '2023-07-18 00:00:00'),
(65, 'Карандаши для рисования Prismacolor', 'Профессиональные цветные карандаши с мягким грифелем, идеально подходят для художественного рисования.', 1200.00, 591, 5, NULL, '2023-12-19 00:00:00'),
(66, 'Наклейки для творчества Sticko', 'Яркие наклейки для скрапбукинга и других творческих проектов.', 250.00, 230, 5, NULL, '2023-12-12 00:00:00'),
(67, 'Холсты для рисования Fredrix', 'Холсты на подрамнике, идеально подходят для масляной и акриловой живописи.', 800.00, 520, 5, NULL, '2023-11-10 00:00:00'),
(68, 'Специальные маркеры для ткани Fabric Markers', 'Маркеры для рисования на ткани, идеально подходят для создания уникальных дизайнов.', 400.00, 448, 5, NULL, '2023-03-01 00:00:00'),
(69, 'Набор для создания открыток Papercraft', 'Набор для создания уникальных открыток, включает все необходимые материалы.', 600.00, 203, 5, NULL, '2023-10-10 00:00:00'),
(70, 'Краски для витражей Pebeo', 'Яркие краски для создания витражей, легко наносятся и быстро сохнут.', 500.00, 950, 5, NULL, '2024-05-15 00:00:00'),
(71, 'Набор для рисования на воде Marbling Kit', 'Набор для создания уникальных рисунков на воде, включает специальные краски и инструменты.', 700.00, 568, 5, NULL, '2024-09-09 00:00:00'),
(72, 'Папки для хранения рисунков Art Portfolio', 'Папка для хранения художественных работ, защищает от повреждений и пыли.', 400.00, 200, 5, NULL, '2024-01-07 00:00:00'),
(73, 'Набор для создания мозаики Mosaic Art', 'Набор для создания мозаичных картин, включает все необходимые материалы.', 800.00, 140, 5, NULL, '2024-10-22 00:00:00'),
(74, 'Краски для граффити Montana', 'Высококачественные краски для граффити, доступны в различных цветах и оттенках.', 1000.00, 520, 5, NULL, '2024-02-04 00:00:00'),
(75, 'Набор для скрапбукинга Scrapbook Kit', 'Полный набор для скрапбукинга, включает бумагу, наклейки и другие аксессуары.', 1200.00, 986, 5, NULL, '2024-04-24 00:00:00');

-- Таблица скидок
CREATE TABLE Discounts (
    discount_id SERIAL PRIMARY KEY,
    code VARCHAR(50) NOT NULL UNIQUE,
    discount_type VARCHAR(50),
    value DECIMAL(10, 2),
    start_date TIMESTAMP,
    end_date TIMESTAMP,
    min_order_amount DECIMAL(10, 2)
);

-- Вставка данных скидок
INSERT INTO Discounts (code, discount_type, value, start_date, end_date, min_order_amount) VALUES
('11', 'процент', -5.00, '2025-01-01 00:00:00', '2025-01-31 23:59:59', NULL),
('22', 'фиксированная сумма', 300.00, '2024-06-20 00:00:00', '2024-06-28 23:59:59', 1200.00),
('33', 'процент', -10.00, '2025-01-01 00:00:00', '2025-01-31 23:59:59', NULL),
('44', 'фиксированная сумма', 50.00, '2025-02-23 00:00:00', '2025-02-25 23:59:59', 300.00),
('55', 'фиксированная сумма', 850.00, '2024-01-29 00:00:00', '2024-02-29 23:59:59', 2500.00),
('66', 'процент', -15.00, '2025-03-08 00:00:00', '2025-03-12 23:59:59', NULL),
('77', 'фиксированная сумма', 150.00, '2024-06-01 00:00:00', '2024-06-30 23:59:59', 550.00);

-- Таблица заказов
CREATE TABLE Orders (
    order_id SERIAL PRIMARY KEY,
    user_id INT REFERENCES Users(user_id) ON DELETE CASCADE,
    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status VARCHAR(50),
    total_amount DECIMAL(10, 2),
    discount_code VARCHAR(50) REFERENCES Discounts(code) ON DELETE SET NULL
);

-- Вставка данных заказов
INSERT INTO Orders (user_id, order_date, status, total_amount, discount_code) VALUES
(6, '2025-01-20 00:00:00', 'в обработке', 3420.00, '11'),
(9, '2024-12-24 00:00:00', 'доставлен', 1000.00, NULL),
(24, '2025-01-26 00:00:00', 'в обработке', 850.00, NULL),
(11, '2024-09-17 00:00:00', 'доставлен', 600.00, NULL),
(4, '2025-01-06 00:00:00', 'отменен', 2300.00, NULL),
(10, '2025-01-10 00:00:00', 'доставлен', 550.00, NULL),
(18, '2024-06-05 00:00:00', 'доставлен', 1100.00, '77'),
(21, '2024-06-20 00:00:00', 'отменен', 900.00, '22'),
(22, '2025-01-27 00:00:00', 'доставлен', 1539.00, '33'),
(2, '2024-07-07 00:00:00', 'доставлен', 2400.00, NULL),
(7, '2024-11-18 00:00:00', 'доставлен', 1300.00, NULL),
(13, '2025-01-15 00:00:00', 'в обработке', 800.00, '44'),
(20, '2024-10-14 00:00:00', 'доставлен', 1800.00, NULL),
(14, '2024-03-13 00:00:00', 'доставлен', 700.00, NULL),
(15, '2025-01-23 00:00:00', 'в обработке', 3900.00, NULL);

-- Таблица заказанных товаров
CREATE TABLE Order_Items (
    order_item_id SERIAL PRIMARY KEY,
    order_id INT REFERENCES Orders(order_id) ON DELETE CASCADE,
    product_id INT REFERENCES Products(product_id) ON DELETE CASCADE,
    quantity INT NOT NULL,
    price DECIMAL(10, 2) NOT NULL
);

-- Вставка данных заказанных товаров
INSERT INTO Order_Items (order_item_id, order_id, product_id, quantity, price) VALUES
(1, 1, 34, 1, 500.00),
(2, 2, 56, 2, 500.00),
(3, 3, 23, 1, 200.00),
(4, 12, 7, 1, 50.00),
(5, 9, 54, 3, 120.00),
(6, 8, 12, 1, 400.00),
(7, 7, 9, 1, 800.00),
(8, 6, 4, 1, 300.00),
(9, 1, 8, 1, 500.00),
(10, 5, 75, 1, 1200.00),
(11, 5, 58, 2, 300.00),
(12, 3, 27, 1, 250.00),
(13, 4, 21, 1, 600.00),
(14, 11, 43, 1, 600.00),
(15, 1, 65, 2, 1200.00),
(16, 13, 32, 1, 600.00),
(17, 10, 68, 1, 400.00),
(18, 9, 22, 3, 350.00),
(19, 15, 5, 2, 250.00),
(20, 12, 19, 1, 800.00),
(21, 13, 20, 1, 1200.00),
(22, 15, 37, 1, 1200.00),
(23, 1, 41, 1, 200.00),
(24, 9, 51, 3, 100.00),
(25, 11, 33, 1, 350.00),
(26, 7, 53, 2, 150.00),
(27, 15, 25, 1, 1000.00),
(28, 10, 74, 2, 1000.00),
(29, 8, 73, 1, 800.00),
(30, 3, 72, 1, 400.00),
(31, 14, 71, 1, 700.00),
(32, 5, 70, 1, 500.00),
(33, 11, 60, 1, 350.00),
(34, 15, 61, 1, 1200.00),
(35, 6, 15, 1, 250.00);

-- Таблица бонусных карт
CREATE TABLE Bonus_Cards (
    card_id SERIAL PRIMARY KEY,
    user_id INT REFERENCES Users(user_id) ON DELETE CASCADE,
    bonus_points INT DEFAULT 0,
    expiration_date TIMESTAMP
);

-- Вставка данных заказанных товаров
INSERT INTO Bonus_Cards (card_id, user_id, bonus_points, expiration_date) VALUES
(1, 1, 45, '2035-05-18'),
(2, 2, 676, '2035-11-17'),
(3, 3, 123, '2035-01-25'),
(4, 5, 6, '2035-04-04'),
(5, 7, 0, '2035-08-07'),
(6, 8, 435, '2035-05-18'),
(7, 9, 24, '2035-11-17'),
(8, 10, 58, '2035-01-25'),
(9, 12, 235, '2035-04-04'),
(10, 13, 9, '2035-08-07'),
(11, 17, 87, '2035-05-18'),
(12, 21, 34, '2035-11-17'),
(13, 20, 8, '2035-01-25');

-- Таблица отзывов
CREATE TABLE Reviews (
    review_id SERIAL PRIMARY KEY,
    product_id INT REFERENCES Products(product_id) ON DELETE CASCADE,
    user_id INT REFERENCES Users(user_id) ON DELETE CASCADE,
    rating INT CHECK (rating >= 1 AND rating <= 5),
    comment TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Вставка данных отзывов
INSERT INTO Reviews (product_id, user_id, rating, comment, created_at, updated_at) VALUES
(4, 10, 4, 'Купила набор цветных карандашей, и они просто великолепны! Яркие цвета, гладкое письмо и удобный захват. Теперь мои заметки выглядят намного интереснее!', '2025-01-15', NULL),
(8, 6, 5, 'Ежедневник оказался отличным помощником для моих записей. Бумага качественная, не просвечивает, а обложка приятная на ощупь.', '2025-01-28', NULL),
(58, 4, 5, 'Клей для декупажа, который я приобрела, просто находка! Он хорошо держит, не оставляет следов и легко наносится. ДОП. Действительно отличный клей, всем советую', '2024-03-07', '2025-01-08'),
(27, 24, 4, 'Папка для хранения художественных работ стала настоящей находкой для моего сына. Она вместительная и качественно сшита. Отлично подходит для учёбы.', '2024-04-19', NULL),
(65, 6, 4, 'Купила линейку из пластика. Которая вдобавок светится при низком освещении. Покупкой довольна.', '2024-05-30', NULL),
(19, 13, 4, 'Тетради в линейку, которые я заказала, оказались стандартными. Бумага неплохая, но не идеальная. В целом, сойдет для повседневного использования.', '2024-06-12', NULL),
(20, 20, 3, 'Фломастеры неплохие, но некоторые из них быстро высыхают. Цвета яркие, но хотелось бы, чтобы они дольше сохраняли свою насыщенность.', '2024-07-25', NULL),
(51, 22, 4, 'Купила набор стикеров. Они симпатичные, но клей не очень сильный, и некоторые из них отклеиваются. В целом, неплохое дополнение к моим записям, ещё разных цветов.', '2024-08-03', NULL),
(33, 7, 5, 'Органайзер для стола стал настоящим спасением! Теперь все канцелярские принадлежности на своем месте, и порядок на рабочем месте заметно улучшился. Очень довольна покупкой!', '2024-09-14', NULL),
(25, 15, 5, 'Набор для скрапбукинга просто мечта! Все материалы качественные и яркие. Посмотрим как будет использоваться в деле. ДОП. отлично для скрапбукинга!!!', '2024-10-22', '2025-01-27');
-- Функция для обновления поля updated_at
CREATE OR REPLACE FUNCTION update_updated_at()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- Триггер для таблицы Reviews
CREATE TRIGGER set_updated_at
BEFORE UPDATE ON Reviews
FOR EACH ROW
EXECUTE FUNCTION update_updated_at();